<form class="annotation-input">
<div class="script_placeholder" data-src="/static/js/capa/annotationinput.js"/>

<div class="annotation-header">${title}</div>
<div class="annotation-body">

    <div class="block block-highlight">${text}</div>
    <div class="block block-comment">${comment}</div>

    <div class="block">${comment_prompt}</div>
    <textarea class="comment" id="input_${id}_comment" name="input_${id}_comment">${comment_value|h}</textarea>

    <div class="block">${tag_prompt}</div>
    <ul class="tags">
    % for option in options:
        <li><span class="tag
        % if option['id'] in options_value:
            selected
        % endif
        " data-id="${option['id']}">${option['description']}</span></li>
    % endfor
    </ul>

    % if debug:
    <div class="debug-value">
        Rendered with value:<br/>
        <pre>${value|h}</pre>
        Current input value:<br/>
        <input type="text" class="value" name="input_${id}" id="input_${id}" value="${value|h}" />
    </div>
    % else:
        <input type="hidden" class="value" name="input_${id}" id="input_${id}" value="${value|h}" />
    % endif

    <span id="answer_${id}"></span>

    % if status == 'unsubmitted':
    <span class="unanswered" style="display:inline-block;" id="status_${id}"></span>
    % elif status == 'correct':
    <span class="correct" id="status_${id}"></span>
    % elif status == 'partial':
    <span class="partially_correct" id="status_${id}">Partially Correct</span>
    % elif status == 'incorrect':
    <span class="incorrect" id="status_${id}"></span>
    % elif status == 'incomplete':
    <span class="incorrect" id="status_${id}"></span>
    % endif

    % if return_to_annotation:
        <a class="annotation-return" href="javascript:void(0)">Return to Annotation</a><br/>
    % endif
</div>
</form>

% if msg:
<span class="message">${msg|n}</span>
% endif

