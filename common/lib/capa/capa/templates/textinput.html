<% doinline = "inline" if inline else "" %>

<%
# TODO: 
# Is id inputtype_${id} vs textinput_${id} important?
# Is class capa_inputtype vs textinput important?
# should really just use one.
%>
<section id="${'inputtype' if do_math else 'textinput'}_${id}" class="${'text-input-dynamath capa_inputtype' if do_math else 'textinput'} ${doinline}" >

    % if preprocessor is not None:
    <div class="text-input-dynamath_data" data-preprocessor="${preprocessor['class_name']}"/>
    <div class="script_placeholder" data-src="${preprocessor['script_src']}"/>
    % endif

    % if state == 'unsubmitted':
    <div class="unanswered ${doinline}" id="status_${id}">
    % elif state == 'correct':
    <div class="correct ${doinline}" id="status_${id}">
    % elif state == 'incorrect':
    <div class="incorrect ${doinline}" id="status_${id}">
    % elif state == 'incomplete':
    <div class="incorrect ${doinline}" id="status_${id}">
    % endif
    % if hidden:
      <div style="display:none;" name="${hidden}" inputid="input_${id}" />
    % endif

  <input type="text" name="input_${id}" id="input_${id}" value="${value}"
        % if do_math:
            class="math"
        % endif
        % if size:
            size="${size}"
        % endif
        % if hidden:
            style="display:none;"
        % endif
   />

      <p class="status">
        % if state == 'unsubmitted':
        unanswered
        % elif state == 'correct':
        correct
        % elif state == 'incorrect':
        incorrect
        % elif state == 'incomplete':
        incomplete
        % endif
      </p>

      <p id="answer_${id}" class="answer"></p>

      % if do_math:
      <div id="display_${id}" class="equation">`{::}`</div>
      % endif

% if state in ['unsubmitted', 'correct', 'incorrect', 'incomplete']:
</div>
% endif

  % if msg:
      <span class="message">${msg|n}</span>
  % endif

</section>
