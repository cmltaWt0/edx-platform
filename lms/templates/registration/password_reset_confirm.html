<%inherit file="main.html" />

<%namespace name='static' file='static_content.html'/>

<%block name="title"><title>Reset Your edX Password</title></%block>

<%block name="js_extra">
  <script type="text/javascript">
    $(function() {

      var view_name = 'view-passwordreset';

      // adding js class for styling with accessibility in mind
      $('body').addClass('js').addClass(view_name);

      // new window/tab opening
      $('a[rel="external"], a[class="new-vp"]')
      .click( function() {
      window.open( $(this).attr('href') );
      return false;
      });

      // form field label styling on focus
      $("form :input").focus(function() {
        $("label[for='" + this.id + "']").parent().addClass("is-focused");
      }).blur(function() {
        $("label").parent().removeClass("is-focused");
      });
    });
  </script>
</%block>

<section class="passwordreset container">
  <section class="introduction">
    <header>
      <h1>Reset Your edX Password</h1>
    </header>
  </section>

  <section role="main" class="content">
    {% if validlink %}
    <header>
      <h2 class="is-hidden">Password Reset Form</h2>
    </header>
    
    <form role="form" id="passwordreset-form" method="post" data-remote="true" action="">
      <!-- status messages -->
      <div role="alert" class="status message is-hidden">
        <h3 class="message-title">We're sorry, edX enrollment is not available in your region</h3>
        <p class="message-copy">Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</p>
      </div>

      <div role="alert" class="status message submission-error is-hidden">
        <h3 class="message-title">The following errors occured while processing your registration: </h3>
        <ul class="message-copy">
          <li>You must complete all fields.</li>
          <li>The two password fields didn't match.</li>
        </ul>
      </div>

      <div role="alert" class="status message system-error is-hidden">
        <h3 class="message-title">We're sorry, our systems seem to be having trouble processing your password reset</h3>
        <p class="message-copy">Someone has been made aware of this issue. Please try again shortly. Please <a href="">contact us</a> about any concerns you have.</p>
      </div>

      <p class="instructions">
        Please enter your new password twice so we can verify you typed it in correctly. <br />
        Required fields are noted by <strong class="indicator">bold text and an asterisk (*)</strong>. 
      </p>

      <fieldset class="group group-form group-form-requiredinformation">
        <legend class="is-hidden">Required Information</legend>

        <ol class="list-input">
          <li class="field required password" id="field-password-initial">
            <label for="password-initial">Your New Password</label>
            <input class="" id="password-initial" type="password" name="password-initial" value="" placeholder="*****" />              
          </li>
          <li class="field required password" id="field-password-repeat">
            <label for="password-repeat">Your New Password Again</label>
            <input class="" id="password-repeat" type="password" name="password-repeat" value="" placeholder="*****" />              
          </li>
        </ol>
      </fieldset>

      <div class="form-actions">
        <button name="submit" type="submit" id="submit" class="action action-primary action-update">Change My Password</button>
      </div>
    </form>

    {% else %}

    <header>
      <h2 class="is-hidden">Your Password Reset Was Unsuccessful</h2>
    </header>
    <p>The password reset link was invalid, possibly because the link has already been used.  Please <a href="" class="action action-forgotpw" rel="modal">request a new password reset</a>.</p>

    {% endif %}
  </section>

  <aside role="complementary">
    <header>
      <h3 class="is-hidden">Password Reset Help</h3>
    </header>

    <div class="cta cta-help">
      <h3>Need Help?</h3>
      <p>View our <a href="#">help section for contact information and answers to commonly asked questions</a></p>
    </div>
  </aside>
</section>