<%! from django.core.urlresolvers import reverse %>

<%def name="make_chapter(chapter)">
  <h3><a href="#">${chapter['display_name']}</a></h3>

  <ul>
    % for section in chapter['sections']:
        <li${' class="active"' if 'active' in section and section['active'] else ''}>
          <a href="${reverse('courseware_section', args=[course_id, chapter['url_name'], section['url_name']])}">
            <p>${section['display_name']}
            <span class="subtitle">
              ${section['format']} ${"due " + section['due'] if 'due' in section and section['due'] != '' else ''}
            </span>
            </p>
          </a>
        </li>
    % endfor
  </ul>
</%def>

% for chapter in toc:
    ${make_chapter(chapter)}
% endfor
