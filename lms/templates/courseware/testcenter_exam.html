<%inherit file="/main_nonav.html" />
<%namespace name='static' file='/static_content.html'/>
<%block name="bodyclass">courseware ${course.css_class}</%block>
<%block name="title"><title>${course.number} Exam</title></%block>

<%block name="headextra">
  <%static:css group='course'/>
  <%include file="../discussion/_js_head_dependencies.html" />
</%block>

<%block name="js_extra">
  <script type="text/javascript" src="${static.url('js/vendor/jquery.scrollTo-1.4.2-min.js')}"></script>
  <script type="text/javascript" src="${static.url('js/vendor/flot/jquery.flot.js')}"></script>

  ## codemirror
  <script type="text/javascript" src="${static.url('js/vendor/codemirror-compressed.js')}"></script>

  ## alternate codemirror
  ##  <script type="text/javascript" src="${static.url('js/vendor/CodeMirror-2.25/lib/codemirror.js')}"></script>
  ##  <script type="text/javascript" src="${static.url('js/vendor/CodeMirror-2.25/mode/xml/xml.js')}"></script>
  ##  <script type="text/javascript" src="${static.url('js/vendor/CodeMirror-2.25/mode/python/python.js')}"></script>


  <%static:js group='courseware'/>
  <%static:js group='discussion'/>

  <%include file="../discussion/_js_body_dependencies.html" />
  % if staff_access:
    <%include file="xqa_interface.html"/>
  % endif

  <!-- TODO: http://docs.jquery.com/Plugins/Validation -->
  <script type="text/javascript">
    document.write('\x3Cscript type="text/javascript" src="' +
        document.location.protocol + '//www.youtube.com/player_api">\x3C/script>');
  </script>

  <script type="text/javascript">
    var $$course_id = "${course.id}";

    $(function(){
        $(".ui-accordion-header a, .ui-accordion-content .subtitle").each(function() {
          var elemText = $(this).text().replace(/^\s+|\s+$/g,''); // Strip leading and trailing whitespace
          var wordArray = elemText.split(" ");
          var finalTitle = "";
          if (wordArray.length > 0) {
            for (i=0;i<=wordArray.length-1;i++) {
              finalTitle += wordArray[i];
              if (i == (wordArray.length-2)) {
                finalTitle += "&nbsp;";
              } else if (i == (wordArray.length-1)) {
                // Do nothing
              } else {
                finalTitle += " ";
              }
            }
          }
          $(this).html(finalTitle);
        });
      });
  </script>

 <script type="text/javascript">  
       
   function getRemainingTime(){
       function pretty_time_string(num) {
         return ( num < 10 ? "0" : "" ) + num;
       }
       
       // set the end time when the template is rendered
       var endTime = new Date(${end_date});
       var currentTime = new Date();
       var remaining_secs = Math.floor((endTime - currentTime)/1000);

       // check to see if time has expired.  If so, we need
       // to go to the exit URL.
       // TBD...
       if (remaining_secs <= 0) {
           return "00:00:00";
       }
       
       // count down in terms of hours, minutes, and seconds:
       var hours = pretty_time_string(Math.floor(remaining_secs / 3600));
       remaining_secs = remaining_secs % 3600;
       var minutes = pretty_time_string(Math.floor(remaining_secs / 60));
       remaining_secs = remaining_secs % 60;
       var seconds = pretty_time_string(Math.floor(remaining_secs));      
       
       var remainingTimeString = hours + ":" + minutes + ":" + seconds;
       return remainingTimeString;
   }
 
   setInterval(function(){
       $('#exam_timer').text(getRemainingTime()); }, 1000);
   
 
   // presumably we need to call something to clear the interval once 
   // the time has expired?  Pass the object that the setInterval() returns
   // to clearInterval()
   
   
 </script>

</%block>

<!-- %include file="/courseware/course_navigation.html" args="active_page='courseware'" /  -->

<span id="exam_timer">&nbsp;</span>

<section class="container">
  <div class="course-wrapper">
    <section class="course-content">
      ${content}
    </section>
  </div>
</section>


% if course.show_calculator:
    <div class="calc-main">
        <a aria-label="Open Calculator" href="#" class="calc">Calculator</a>

        <div id="calculator_wrapper">
            <form id="calculator">
                <div class="input-wrapper">
                    <input type="text" id="calculator_input" />

                    <div class="help-wrapper">
                        <a href="#">Hints</a>
                        <dl class="help">
                            <dt>Suffixes:</dt>
                            <dd> %kMGTcmunp</dd>
                            <dt>Operations:</dt>
                            <dd>^ * / + - ()</dd>
                            <dt>Functions:</dt>
                            <dd>sin, cos, tan, sqrt, log10, log2, ln, arccos, arcsin, arctan, abs </dd>
                            <dt>Constants</dt>
                            <dd>e, pi</dd>

                            <!-- Students won't know what parallel means at this time.  Complex numbers aren't well tested in the courseware, so we would prefer to not expose them.  If you read the comments in the source, feel free to use them. If you run into a bug, please let us know. But we can't officially support them right now.

                            <dt>Unsupported:</dt> <dd>||, j </dd>  -->
                        </dl>
                    </div>
                </div>
                <input id="calculator_button" type="submit" value="="/>
                <input type="text" id="calculator_output"  readonly />
            </form>

        </div>
    </div>
% endif
