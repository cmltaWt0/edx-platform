<%inherit file="base.html" />
<%! from django.core.urlresolvers import reverse %>
<%block name="title">CMS Courseware Overview</%block>

<%namespace name="units" file="widgets/units.html" />

<%block name="header_extras">
  <script type="text/template" id="new-section-template">
    <section class="courseware-section branch new-section">
      <header>
        <a href="#" class="expand-collapse-icon collapse"></a>
        <div class="item-details">
          <h3 class="section-name"><input type="text" value="New Section Name" class="new-section-name" /><a href="#" class="new-section-name-save" data-parent="${parent_location}" data-template="${new_section_template}">Save</a><a href="#" class="new-section-name-cancel">Cancel</a></h3>
        </div>
      </header>
    </section>
  </script>

  <script type="text/template" id="new-subsection-template">
    <li class="branch collapsed">
      <div class="section-item editing">
        <div>
          <span class="folder-icon"></span>
          <span class="subsection-name">
            <input type="text" value="New Subsection" class="new-subsection-name-input" />
          </span>
          <a href="#" class="new-subsection-name-save">Save</a>
          <a href="#" class="new-subsection-name-cancel">Cancel</a>
        </div>
      </div>
      <ol>
        <li>
          <a href="unit.html" class="new-unit-item">
            <span class="new-unit-icon"></span>New Unit
          </a>
        </li>
      </ol>
    </li>
  </script>


</%block>

<%block name="content">
  <div class="main-wrapper">
    <div class="inner-wrapper">
      <h1>Courseware</h1>
      <div class="page-actions"></div>
      <article class="courseware-overview">
        <a href="#" class="new-courseware-section-button"><span class="plus-icon"></span> New Section</a>
        % for section in sections:
        <section class="courseware-section branch" data-id="${section.location}">
          <header>
            <a href="#" class="expand-collapse-icon collapse"></a>
            <div class="item-details">
              <h3>${section.display_name}</h3>
              <h4><strong>Unscheduled:</strong> <a href="#">click here to set</a></h4>
            </div>
            <div class="item-actions">
              <a href="#" class="delete-button delete-section-button"><span class="delete-icon"></span></a>
              <a href="#" class="drag-handle wip"></a>
            </div>
          </header>
          <div class="unit-list">
            <div class="list-header">
              <a href="#" class="new-subsection-item" data-template="${new_subsection_template}">
                <span class="new-folder-icon"></span>New Subsection
              </a>
            </div>
            <ol>
              % for subsection in section.get_children():
              <li class="branch collapsed" data-id="${subsection.location}">
                <div class="section-item">
                  <div>
                    <a href="#" class="expand-collapse-icon expand"></a>
                    <a href="${reverse('edit_subsection', args=[subsection.location])}">
                      <span class="folder-icon"></span>
                      <span class="subsection-name"><span class="subsection-name-value">${subsection.display_name}</span></span>
                    </a>
                  </div>
                  <div class="item-actions">
                    <a href="#" class="delete-button delete-subsection-button"><span class="delete-icon"></span></a>                    
                    <a href="#" class="drag-handle wip"></a>
                  </div>
                </div>
		${units.enum_units(subsection)}
              </li>
              % endfor
            </ol>
          </div>
        </section>
        % endfor
      </article>
    </div>
    <%include file="widgets/upload_assets.html"/>
  </div>
  <footer></footer>
</%block>
